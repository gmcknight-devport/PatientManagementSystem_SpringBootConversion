
DROP TABLE IF EXISTS PATIENT;
CREATE TABLE PATIENT(
    USER_ID CHAR(5) PRIMARY KEY NOT NULL,
    USER_PASSWORD VARCHAR(30) NOT NULL,
    TITLE CHAR(4) NOT NULL,
    FORENAME VARCHAR(30) NOT NULL,
    SURNAME VARCHAR(40) NOT NULL,
    AGE INT NOT NULL,
    GENDER CHAR(1) NOT NULL
);

DROP TABLE IF EXISTS TEMPUSER;
CREATE TABLE TEMPUSER(
    USER_ID CHAR(5) PRIMARY KEY NOT NULL,
    USER_PASSWORD VARCHAR(30) NOT NULL,
    TITLE CHAR(4) NOT NULL,
    FORENAME VARCHAR(30) NOT NULL,
    SURNAME VARCHAR(40) NOT NULL,
    AGE INT NOT NULL,
    GENDER CHAR(1) NOT NULL
);

DROP TABLE IF EXISTS DOCTOR;
 CREATE TABLE DOCTOR(
     USER_ID CHAR(5) PRIMARY KEY NOT NULL,
     USER_PASSWORD VARCHAR(30) NOT NULL,
     TITLE CHAR(4) NOT NULL,
     FORENAME VARCHAR(30) NOT NULL,
     SURNAME VARCHAR(40) NOT NULL
     --ADDRESS VARCHAR(80) NOT NULL
 );
 
DROP TABLE IF EXISTS ADMINISTRATOR;
 CREATE TABLE ADMINISTRATOR(
     USER_ID CHAR(5) PRIMARY KEY NOT NULL,
     USER_PASSWORD VARCHAR(30) NOT NULL,
     TITLE CHAR(4) NOT NULL,
     FORENAME VARCHAR(30) NOT NULL,
     SURNAME VARCHAR(40) NOT NULL
 );
 
DROP TABLE IF EXISTS SECRETARY;
 CREATE TABLE SECRETARY(
     USER_ID CHAR(5) PRIMARY KEY NOT NULL,
     USER_PASSWORD VARCHAR(30) NOT NULL,
     TITLE CHAR(4) NOT NULL,
     FORENAME VARCHAR(30) NOT NULL,
     SURNAME VARCHAR(40) NOT NULL
 );
 
 DROP TABLE IF EXISTS MEDICINE_STOCK;
 CREATE TABLE MEDICINE_STOCK(
     MED_NAME VARCHAR(50) PRIMARY KEY NOT NULL,
     MED_DOSAGE VARCHAR(200) NOT NULL,
     QUANTITY INT NOT NULL,
     COMMON_USES VARCHAR(400) NOT NULL
 );
  
INSERT INTO PATIENT(USER_ID, USER_PASSWORD, TITLE, FORENAME, SURNAME, AGE, GENDER) VALUES 
    ('P1001', 'patientpassword', 'Mr', 'John', 'Sickness', '30', 'M'),
    ('P1002', '2ndpatientpassword', 'They', 'Air', 'Syphon', '40', 'O'),
    ('P1003', '3rdpatientpassword', 'Mrs', 'Philomena','Lynott', '80', 'F');

DROP TABLE IF EXISTS PATIENT_NOTES;
CREATE TABLE PATIENT_NOTES(
    USER_ID CHAR(5) NOT NULL,
    NOTES VARCHAR(600) NOT NULL,
    FOREIGN KEY (USER_ID) REFERENCES PATIENT(USER_ID)
);

INSERT INTO PATIENT_NOTES(USER_ID, NOTES) VALUES
	('P1001', 'Some info about patient'),
	('P1001', 'Same more here'),
	('P1003', 'More info');

INSERT INTO TEMPUSER(USER_ID, USER_PASSWORD, TITLE, FORENAME, SURNAME, AGE, GENDER) VALUES 
	('T1001', 'passcode', 'They', 'Person', 'Personable', '40', 'O');

/*
  * Doctors
  */
  
INSERT INTO DOCTOR(USER_ID, USER_PASSWORD, TITLE, FORENAME, SURNAME) VALUES 
     ('D1001', 'doctorpassword', 'Dr', 'Pauline', 'Health'), 
     ('D1002', '2nddoctorpassword', 'Dr', 'Jeremy', 'Full'), 
     ('D1003', '3rddoctorpassword', 'Dr', 'Ellen', 'Ellenson');
    
    
DROP TABLE IF EXISTS APPOINTMENT;
CREATE TABLE APPOINTMENT(
 	ID IDENTITY,
    PATIENT_ID CHAR(5) NOT NULL,
    DOCTOR_ID CHAR(5) NOT NULL,
	APPOINTMENT_START_TIME TIME NOT NULL,
	APPOINTMENT_END_TIME TIME NOT NULL,
    APPOINTMENT_DATE DATE NOT NULL,
    APPROVED BOOLEAN NOT NULL,
    FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(USER_ID)
);

INSERT INTO APPOINTMENT (PATIENT_ID, DOCTOR_ID, APPOINTMENT_START_TIME, APPOINTMENT_END_TIME, APPOINTMENT_DATE, APPROVED) VALUES
	('P1001', 'D1001', '09:00', '09:30', '2022-03-03', True),
	('P1001', 'D1001', '11:30', '12:00', '2024-10-15', False),
	('P1002', 'D1003', '15:00', '15:30', '2024-09-13', False),
	('P1003', 'D1001', '11:30', '12:00', '2024-08-30', True),
	('P1002', 'D1002', '16:00', '16:20', '2022-02-08', True);

DROP TABLE IF EXISTS PRESCRIPTIONS;
CREATE TABLE PRESCRIPTIONS(
	ID IDENTITY, 	
    PATIENT_ID CHAR(5) NOT NULL,     
    PRESCRIPTION VARCHAR(500) NOT NULL,
    DOCTOR_ID CHAR(5) NOT NULL,
    PRESCRIPTION_DATE DATE NOT NULL,
    FOREIGN KEY (PATIENT_ID) REFERENCES PATIENT(USER_ID)
);

INSERT INTO PRESCRIPTIONS(PATIENT_ID, PRESCRIPTION, DOCTOR_ID, PRESCRIPTION_DATE) VALUES
	('P1003', 'Some presciption here', 'D1003', '2021-01-11'),
	('P1003', 'Another prescription here', 'D1001', '2021-02-15'),
	('P1002', 'Can''t believe it isn''t a prescription', 'D1003', '2021-04-08');

DROP TABLE IF EXISTS ADDRESS;
CREATE TABLE ADDRESS(
	USER_ID CHAR(5) NOT NULL,
	ADDRESS_LINE1 VARCHAR(60) NOT NULL,
	ADDRESS_LINE2 VARCHAR(60),
	CITY VARCHAR(30) NOT NULL,
	POSTCODE VARCHAR(8) NOT NULL
);
	
INSERT INTO ADDRESS(USER_ID, ADDRESS_LINE1, ADDRESS_LINE2, CITY, POSTCODE) VALUES
	('D1001', 'This here surgery', 'some road', 'Exeter', 'EX2 8LB'),
	('D1002', 'This here surgery', 'some road', 'Exeter', 'EX2 8LB'),
	('D1003', 'This here surgery', 'some road', 'Exeter', 'EX2 8LB'),
	('P1001', '5 Deathly Road', '', 'Plymouth', 'PL1 1EE'),
    ('P1002', '16 Unfortunate Ave', '' , 'Plymouth', 'PL20 9IE'),
    ('P1003', '5 Emerald View', '', 'Plymouth', 'PL15 7BB'),
    ('T1001', '15 a street' , '', 'Okehampton', 'PL26 4RT');
	
DROP TABLE IF EXISTS DOC_RATING;
CREATE TABLE DOC_RATING(
    DOCTOR_ID CHAR(5) NOT NULL,
    RATING INT NOT NULL,
    FOREIGN KEY (DOCTOR_ID) REFERENCES DOCTOR(USER_ID)
);

INSERT INTO DOC_RATING(DOCTOR_ID, RATING) VALUES
	('D1001', 5),
	('D1001', 4),
	('D1002', 3),
	('D1003', 4),
	('D1003', 4),
	('D1003', 5);

DROP TABLE IF EXISTS MEDICINE;
CREATE TABLE MEDICINE(
	MEDICINE_NAME VARCHAR(30) PRIMARY KEY NOT NULL,
	MEDICINE_DOSAGE VARCHAR(80) NOT NULL,
	COMMON_USES VARCHAR(200) NOT NULL,
	QUANTITY INT NOT NULL
); 

INSERT INTO MEDICINE(MEDICINE_NAME, MEDICINE_DOSAGE, COMMON_USES, QUANTITY) VALUES 
	('Lithium', '300mg / twice per day', 'Mania, Bipolar Disorder', '60'),
    ('Diazepam', '5mg / 3-4 times per day', 'Anxiety disorders, alochol withdrawal symptoms, muscle spasms', '100'),
    ('Lorazepam', '2mg / 2-3times per day', 'Anxiety disorders, seizures', '20'),
    ('Insulin', '4 units', 'Diabetes', '90'),
    ('Zopaclone', '1mg before bed', 'Insomnia', '10'),
    ('Amoxicillan', '250mg / twice per day', 'Bacerial infections', '10'),
    ('Hydrocortisone', '1% / apply as needed', 'Inflammation', '15'),
    ('Atorvastatin', '20mg / once per day', 'High cholesterol, stroke and heart attack risk', '22'),
    ('Lisinopril', '5mg / once per day', 'High blood pressure', '10'),
	('Warfarin', '5mg / once per day', 'Blood thinner to reduce clotting', '40');


/*
  * Secretaries
  */
INSERT INTO SECRETARY(USER_ID, USER_PASSWORD, TITLE, FORENAME, SURNAME) VALUES ('S1001', 'secpassword', 'Mr', 'Norm', 'Surly');
 
 /*
  * Administrators
  */
INSERT INTO ADMINISTRATOR(USER_ID, USER_PASSWORD, TITLE, FORENAME, SURNAME) VALUES ('A1001', 'adminpassword', 'Miss', 'Melanie', 'Lady');



/*
 * Messages
 */
 
DROP TABLE IF EXISTS PATIENT_MESSAGE;
CREATE TABLE PATIENT_MESSAGE(
	ID IDENTITY,
    USER_ID CHAR(5) NOT NULL,
    SENDER_ID CHAR(5) NOT NULL,
    SENDER_NAME VARCHAR (100),
    SENT_AT TIMESTAMP,
    MESSAGE VARCHAR(500) NOT NULL,
    IS_READ BOOLEAN,
    FOREIGN KEY (USER_ID) REFERENCES PATIENT(USER_ID)
 );

DROP TABLE IF EXISTS DOCTOR_MESSAGE;
CREATE TABLE DOCTOR_MESSAGE(
	ID IDENTITY,
	USER_ID CHAR(5) NOT NULL,
	SENDER_ID CHAR(5) NOT NULL,
	SENDER_NAME VARCHAR (100),
	SENT_AT TIMESTAMP,
	MESSAGE VARCHAR(500) NOT NULL,	
    IS_READ BOOLEAN,
	FOREIGN KEY (USER_ID) REFERENCES DOCTOR(USER_ID)
);

DROP TABLE IF EXISTS ADMINISTRATOR_MESSAGE;
CREATE TABLE ADMINISTRATOR_MESSAGE(
	ID IDENTITY,
	USER_ID CHAR(5) NOT NULL,
    SENDER_ID CHAR(5) NOT NULL,
    SENDER_NAME VARCHAR (100),
    SENT_AT TIMESTAMP,
    MESSAGE VARCHAR(500) NOT NULL,
    IS_READ BOOLEAN,
	FOREIGN KEY (USER_ID) REFERENCES ADMINISTRATOR(USER_ID)
);

DROP TABLE IF EXISTS SECETARY_MESSAGE;
CREATE TABLE SECRETARY_MESSAGE( 
	ID IDENTITY,
	USER_ID CHAR(5) NOT NULL,
    SENDER_ID CHAR(5) NOT NULL,
    SENDER_NAME VARCHAR (100),
    SENT_AT TIMESTAMP,
    MESSAGE VARCHAR(500) NOT NULL,
    IS_READ BOOLEAN,
	FOREIGN KEY (USER_ID) REFERENCES SECRETARY(USER_ID)
);

--INSERT INTO PATIENT_MESSAGE(USER_ID, SENDER_ID, SENDER_NAME, SENT_AT, MESSAGE, IS_READ) VALUES
	--('P1001', 'D1001', 'DR ONE', '2021-10-12 11:00:00', 'Some news', 'False'),
	--('P1001', 'D1002', 'DR TWO', '2021-09-09 16:00:00', 'Quick, read this', 'False');

--INSERT INTO DOCTOR_MESSAGE(USER_ID, SENDER_ID, SENDER_NAME, SENT_AT, MESSAGE, IS_READ) VALUES
	--('D1003', 'P1003', 'Pat manboy', '2021-10-10 12:59:00', 'Help with prescription', 'False');
--/*
-- * Messages
-- */
--INSERT INTO USER_MESSAGES(PATIENT_ID, DOCTOR_ID, ADMIN_ID, SEC_ID, MESSAGE) VALUES
--	('P1001', NULL, NULL, NULL, 'Your doctor has requested you make an appointment for a check up');
--INSERT INTO MESSAGES(PATIENT_ID, MESSAGE) VALUES
--	('P1001', 'Your doctor has requested you make an appointment for a check up'),
--	('P1001', 'Thank you for attending your last appointment. Please get in contact if you require another appointment');
--	--('', '', 'A1001', '', 'Can you check that all doctor records are up to date please?');
--
----INSERT INTO MESSAGES(ADMIN_ID, MESSAGE) VALUES
----	('', '', 'A1001', '', 'Can you check that all doctor records are up to date please?');